package.preload['temper-regex-engine/ctype']=function()local a=require('temper-core')local b,c,d,e,f,g,h,i,j;b=function()local k,l,m,n;k=a.densebitvector_constructor(0.0)l=48.0;while l<=57.0 do a.densebitvector_set(k,l,true)l=l+1.0 end;m=65.0;while m<=90.0 do a.densebitvector_set(k,m,true)m=m+1.0 end;n=97.0;while n<=122.0 do a.densebitvector_set(k,n,true)n=n+1.0 end;a.densebitvector_set(k,95.0,true)return k end;c=function()local o;o=a.densebitvector_constructor(0.0)a.densebitvector_set(o,32.0,true)a.densebitvector_set(o,13.0,true)a.densebitvector_set(o,10.0,true)a.densebitvector_set(o,9.0,true)a.densebitvector_set(o,12.0,true)a.densebitvector_set(o,14.0,true)return o end;d=function(p,q)local r,s;r=a.listbuilder_constructor()s=0.0;while s<q do if a.densebitvector_get(p,s)then a.listbuilder_add(r,s)end;s=s+1.0 end;return r end;e=b()f=c()g=d(e,128.0)h=d(f,32.0)i=function(t)local u;if a.densebitvector_get(e,t)then u=true else u=t>=256.0 end;return u end;j={}j.wordChars=e;j.spaceChars=f;j.wordCharsList=g;j.spaceCharsList=h;j.isWordChar=i;return j end;package.preload['temper-regex-engine/dfa/dfa']=function()local a=require('temper-core')local v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,j;v=a.import('temper-regex-engine/nfa/matcher','charCodeMatcher')w=a.import('temper-regex-engine/nfa/matcher','fromChars')x=a.import('temper-regex-engine/util','regexToString')y=a.import('temper-regex-engine/util','bogusMatch')z=a.import('temper-regex-engine/util','chr')A=a.import('temper-regex-engine/nfa/matcher','SingleMatcher')B=a.import('temper-regex-engine/nfa/matcher','ContainsMatcher')C=a.import('temper-regex-engine/nfa/matcher','EpsilonMatcher')D=a.import('temper-regex-engine/nfa/matcher','StartGroupMatcher')E=a.import('temper-regex-engine/nfa/matcher','EndGroupMatcher')F=a.import('temper-regex-engine/nfa/matcher','WordBoundaryMatcher')G=a.import('temper-regex-engine/nfa/matcher','BeginMatcher')H=a.import('temper-regex-engine/nfa/matcher','EndMatcher')I=a.type('Target')I.methods.eq=function(Q,R)local S,T,U::V::if a.listed_length(R.name)~=a.listed_length(Q.name__113)then S=false;goto W end;U=0.0;while true do T=a.listed_length(Q.name__113)if not(U<T)then break end;if a.listed_get(R.name,U)~=a.listed_get(Q.name__113,U)then S=false;goto W end;U=U+1.0 end;S=true::W::return S end;I.methods.toString=function(X)local Y,Z,_::a0::if a.listed_length(X.name__113)==0.0 then Y='<error>'goto a1 end;Z=function(a2)return a.concat('v',a.int32_tostring(a2))end;_=a.listed_join(X.name__113,',',Z)Y=a.concat('{',_,'}')::a1::return Y end;I.methods.and_=function(a3,a4)local a5,a6,a7;a6=a.listbuilder_constructor()a7=0.0;while true do local a8;a5=a.listed_length(a3.name__113)if not(a7<a5)then break end;a8=a.listed_get(a3.name__113,a7)if a8~=a4 then a.listbuilder_add(a6,a8)end;a7=a7+1.0 end;a.listbuilder_add(a6,a4)return I(a6)end;I.methods.ands=function(a9,aa)local ab,ac,ad,ae,af,ag;ae=I(a9.name__113)af=ae;ag=0.0;while true do ab=a.listed_length(aa.name)if not(ag<ab)then break end;ac=a.listed_get(aa.name,ag)ad=af:and_(ac)af=ad;ag=ag+1.0 end;return af end;I.constructor=function(ah,ai)local aj,ak;aj=function(al,am)return al-am end;ak=a.listed_sorted(ai,aj)ah.name__113=ak;ah.id__114=-1.0;return nil end;I.get.name=function(an)return an.name__113 end;I.get.id=function(ao)return ao.id__114 end;I.set.id=function(ap,aq)ap.id__114=aq;return nil end;J=a.type('Row')J.methods.toString=function(ar)local as,at,au,av;as=ar.name__140:toString()at=function(aw)local ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH;if 32.0<=aw then aA=aw<=126.0 else aA=false end;if aA then ax=z(aw)aD=a.concat('#',ax)else ay=a.int32_tostring(aw)aD=ay end;aE,aF,aG=a.pcall(function()aB=a.mapped_get(ar.map__143,aw)aC=aB end)if aE then else az=a.bubble()aC=az end;aH=aC:toString()return a.concat('\n','  ',aD,' => ',aH)end;au=a.listed_join(ar.keys__142,'',at)av=a.concat('\n','  else => ',ar.other__141:toString())return a.concat(as,':',au,av)end;J.constructor=function(aI,aJ,aK,aL,aM,aN)aI.name__140=aJ;aI.other__141=aK;aI.keys__142=aL;aI.map__143=aM;aI.ok__144=aN;return nil end;J.get.name=function(aO)return aO.name__140 end;J.get.other=function(aP)return aP.other__141 end;J.get.keys=function(aQ)return aQ.keys__142 end;J.get.map=function(aR)return aR.map__143 end;J.get.ok=function(aS)return aS.ok__144 end;K=a.type('Table')K.get.targets=function(aT)return aT.targetsVar__163 end;K.methods.update=function(aU,aV)local aW,aX,aY::aZ::if a.listed_length(aV.name)==0.0 then aV['id']=-1.0;aW=nil;goto a_ end;aY=0.0;while true do aX=a.listed_length(aU.targets)if not(aY<aX)then break end;if a.listed_get(aU.targets,aY):eq(aV)then aV['id']=aY;aW=nil;goto a_ end;aY=aY+1.0 end;a.bubble()aW=nil::a_::return aW end;K.methods.finish=function(b0)local b1,b2,b3,b4,b5,b6,b7,b8,b9,ba,bb,bc;b9=a.listbuilder_constructor()ba=b9;b0.targetsVar__163=ba;bb=0.0;while true do local bd,be::bf::b1=a.listbuilder_length(b0.rows__160)if not(bb<b1)then break end;bd=a.listed_get(b0.rows__160,bb)be=0.0;while true do b2=a.listbuilder_length(b9)if not(be<b2)then break end;if a.listed_get(b9,be):eq(bd.name)then bd.name['id']=be;goto bg end;be=be+1.0 end;bd.name['id']=bb;a.listbuilder_add(b9,bd.name)::bg::bb=bb+1.0 end;bc=0.0;while true do local bh,bi;b3=a.listbuilder_length(b0.rows__160)if not(bc<b3)then break end;bh=a.listed_get(b0.rows__160,bc)b4=bh.other;b0:update(b4)bi=0.0;while true do local bj,bk,bl,bm,bn;b5=a.listed_length(bh.keys)if not(bi<b5)then break end;bj=a.listed_get(bh.keys,bi)bk,bl,bm=a.pcall(function()b7=a.mapped_get(bh.map,bj)b8=b7 end)if bk then else b6=a.bubble()b8=b6 end;bn=b8;b0:update(bn)bi=bi+1.0 end;bc=bc+1.0 end;return nil end;K.methods.has=function(bo,bp)local bq,br,bs::bt::bs=0.0;while true do br=a.listbuilder_length(bo.rows__160)if not(bs<br)then break end;if a.listed_get(bo.rows__160,bs).name:eq(bp)then bq=true;goto bu end;bs=bs+1.0 end;bq=false::bu::return bq end;K.methods.add=function(bv,bw)local bx;bx=bw.name;if not bv:has(bx)then a.listbuilder_add(bv.rows__160,bw)end;return nil end;K.methods.addEmpty=function(by,bz)local bA,bB,bC;bA=a.listof()bB=a.map_constructor(a.listof())bC=J(bz,N,bA,bB,false)by:add(bC)return nil end;K.methods.toString=function(bD)local bE;bE=function(bF)return bF:toString()end;return a.listed_join(bD.rows__160,'\n',bE)end;K.methods.foundAt=function(bG,bH,bI)local bJ,bK,bL,bM,bN,bO::bP::bN=a.string_end(bH)bO=0.0;while true do local bQ,bR,bS;bQ=a.listed_getor(bG.rows__160,bO,O)bR=a.string_get(bH,bI)bS=a.mapped_getor(bQ.map,bR,bQ.other)if bS.id<0.0 then bM=true else bM=a.stringindexoption_compareto_eq(bI,bN)end;if bM then if bQ.ok then bJ=bI;goto bT else bJ=-1.0;goto bT end end;bK=bS.id;bO=bK;bL=a.string_next(bH,bI)bI=bL end::bT::return bJ end;K.methods.foundAfter=function(bU,bV,bW)local bX,bY,bZ::b_::bZ=a.string_end(bV)while a.stringindexoption_compareto_ne(bW,bZ)do local c0;c0=bU:foundAt(bV,bW)if a.stringindexoption_compareto_ne(c0,-1.0)then bX=c0;goto c1 end;bY=a.string_next(bV,bW)bW=bY end;bX=-1.0::c1::return bX end;K.constructor=function(c2,c3,c4)c2.rows__160=c3;c2.targetsVar__163=c4;return nil end;K.get.rows=function(c5)return c5.rows__160 end;L=a.type('Alphabet__50')L.methods.add=function(c6,c7)if not a.mapped_getor(c6.map__215,c7,false)then a.listbuilder_add(c6.keys__214,c7)a.mapbuilder_set(c6.map__215,c7,true)end;return nil end;L.fromEngine=function(c8)local c9,ca,cb,cc,cd,ce,cf,cg;cf=L()cg=0.0;while true do local ch,ci;c9=a.listbuilder_length(c8.states)if not(cg<c9)then break end;ch=a.listed_get(c8.states,cg)ci=0.0;while true do local cj;ca=a.listbuilder_length(ch.next)if not(ci<ca)then break end;cb=a.listed_get(ch.next,ci)cj=cb.matcher;if a.instance_of(cj,B)then ce=a.cast_to(cj,B)if ce.want then local ck;ck=0.0;while true do cc=a.listed_length(ce.options)if not(ck<cc)then break end;cf:add(a.listed_get(ce.options,ck))ck=ck+1.0 end else local cl;cl=0.0;while true do cd=a.listed_length(ce.options)if not(cl<cd)then break end;cf:add(a.listed_get(ce.options,cl))cl=cl+1.0 end end elseif a.instance_of(cj,A)then cf:add(a.cast_to(cj,A).char)end;ci=ci+1.0 end;cg=cg+1.0 end;return cf end;L.constructor=function(cm)local cn,co;cn=a.listbuilder_constructor()cm.keys__214=cn;co=a.mapbuilder_constructor()cm.map__215=co;return nil end;L.get.keys=function(cp)return cp.keys__214 end;L.get.map=function(cq)return cq.map__215 end;M=a.type('DFA')M.none=function()return M(P)end;M.fromEngine=function(cr)local cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO;cJ=L.fromEngine(cr)cK=a.mapbuilder_constructor()cL=0.0;while true do local cP;ct=a.listbuilder_length(cr.states)if not(cL<ct)then break end;cP=a.listed_get(cr.states,cL)a.mapbuilder_set(cK,cP.id,cP)cL=cL+1.0 end;cM=K(a.listbuilder_constructor(),a.listof())cM:addEmpty(I(a.listof(0.0)))cN=true;cO=0.0;while true do local cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ;cu=a.listbuilder_length(cM.rows)if not(cO<cu)then break end;cQ=a.listed_get(cM.rows,cO)cv=I(a.listof())cR=cv;cS=a.listbuilder_constructor()cT=a.mapbuilder_constructor()cU=a.mapbuilder_constructor()cV=function(c_)local d0,d1,d2,d3,d4,d5,d6,d7,d8;d7=0.0;while true do local d9,da;d0=a.listbuilder_length(c_.next)if not(d7<d0)then break end;d1=a.listed_get(c_.next,d7)d9=d1.toState;da=d1.matcher;if a.instance_of(da,C)then cV(d9)else if a.instance_of(da,D)then d6=true else if a.instance_of(da,E)then d5=true else if a.instance_of(da,F)then d4=true else if a.instance_of(da,G)then d3=true else d2=a.instance_of(da,H)d3=d2 end;d4=d3 end;d5=d4 end;d6=d5 end;if d6 then cN=false end end;d7=d7+1.0 end;d8=c_.id;cR=cR:and_(d8)return nil end;cW=function(db,dc)local dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,dp,dq,dr;dr=0.0;while true do local ds,dt;dd=a.listbuilder_length(dc.next)if not(dr<dd)then break end;de=a.listed_get(dc.next,dr)ds=de.toState;dt=de.matcher;if a.instance_of(dt,C)then cW(db,ds)else if a.instance_of(dt,D)then dn=true else if a.instance_of(dt,E)then dm=true else if a.instance_of(dt,F)then dl=true else if a.instance_of(dt,G)then dk=true else df=a.instance_of(dt,H)dk=df end;dl=dk end;dm=dl end;dn=dm end;if dn then cN=false end end;dr=dr+1.0 end;if not a.mapped_has(cT,db)then a.listbuilder_add(cS,db)dg=I(a.listof(dc.id))a.mapbuilder_set(cT,db,dg)else local du,dv,dw;du,dv,dw=a.pcall(function()dp=a.mapped_get(cT,db)dq=dp end)if du then else dh=a.bubble()dq=dh end;di=dc.id;dj=dq:and_(di)a.mapbuilder_set(cT,db,dj)end;return nil end;cX=function(dx)local dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK::dL::dz=dx.id;if a.mapped_getor(cU,dz,false)then dy=nil;goto dM end;dA=dx.id;a.mapbuilder_set(cU,dA,true)dK=0.0;while true do local dN,dO;dB=a.listbuilder_length(dx.next)if not(dK<dB)then break end;dC=a.listed_get(dx.next,dK)dN=dC.toState;dO=dC.matcher;if a.instance_of(dO,B)then dJ=a.cast_to(dO,B)if dJ.want then local dP;dP=0.0;while true do dD=a.listed_length(dJ.options)if not(dP<dD)then break end;dE=a.listed_get(dJ.options,dP)cW(dE,dN)dP=dP+1.0 end else local dQ;dQ=0.0;while true do local dR;dF=a.listbuilder_length(cJ.keys)if not(dQ<dF)then break end;dR=a.listed_get(cJ.keys,dQ)if not a.densebitvector_get(dJ.bitset,dR)then cW(dR,dN)elseif not a.mapped_has(cT,dR)then dG=I(a.listof())a.mapbuilder_set(cT,dR,dG)a.listbuilder_add(cS,dR)end;dQ=dQ+1.0 end;cV(dN)end elseif a.instance_of(dO,A)then dH=a.cast_to(dO,A).char;cW(dH,dN)elseif a.instance_of(dO,C)then cX(dN)else cN=false end;dK=dK+1.0 end;dI=dx.id;a.mapbuilder_set(cU,dI,false)dy=nil::dM::return dy end;cY=0.0;while true do local dS,dT,dU;cw=a.listed_length(cQ.name.name)if not(cY<cw)then break end;dS,dT,dU=a.pcall(function()cE=a.mapped_get(cK,a.listed_get(cQ.name.name,cY))cF=cE end)if dS then else cx=a.bubble()cF=cx end;cX(cF)cY=cY+1.0 end;if a.listed_length(cR.name)~=0.0 then cM:addEmpty(cR)end;cZ=0.0;while true do local dV,dW,dX,dY,dZ;cy=a.listbuilder_length(cS)if not(cZ<cy)then break end;dV=a.listed_get(cS,cZ)dW,dX,dY=a.pcall(function()cG=a.mapped_get(cT,dV)cH=cG end)if dW then else cz=a.bubble()cH=cz end;dZ=cH;cM:addEmpty(dZ)cZ=cZ+1.0 end;cA=cM.rows;cB=cQ.name;if a.listed_getor(cQ.name.name,0.0,-1.0)==1.0 then cI=true else cC=a.listed_getor(cQ.name.name,1.0,-1.0)cI=cC==1.0 end;cD=J(cB,cR,cS,cT,cI)a.listbuilder_set(cA,cO,cD)cO=cO+1.0 end;cM:finish()if not cN then cs=a.null else cs=M(cM)end;return cs end;M.methods.found=function(d_,e0,e1)return d_.table__230:foundAt(e0,e1)end;M.constructor=function(e2,e3)e2.table__230=e3;return nil end;M.get.table=function(e4)return e4.table__230 end;N=I(a.listof())O=J(N,N,a.listof(),a.map_constructor(a.listof()),false)P=K(a.listbuilder_constructor(),a.listof())j={}j.Target=I;j.Row=J;j.Table=K;j.DFA=M;return j end;package.preload['temper-regex-engine/dfa/javascript']=function()local a=require('temper-core')local e5,j;e5=a.type('Javascript')e5.fromTable=function(e6)local e7,e8,e9;e7=e5(a.listbuilder_constructor())e7:addTable(e6)e8=e7.buf;e9=function(ea)return ea end;return a.listed_join(e8,'',e9)end;e5.methods.addString=function(eb,ec)a.listbuilder_add(eb.buf__27,ec)return nil end;e5.methods.addTarget=function(ed,ee)local ef;if ee.id<0.0 then a.bubble()else ed:addString('q')ef=a.int32_tostring(ee.id)ed:addString(ef)end;return nil end;e5.methods.addRow=function(eg,eh)local ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex;eg:addString('const ')ew=eh.name;eg:addTarget(ew)eg:addString(' = ')eg:addString('(str, head) => {\n')if eh.ok then eg:addString('  let ret = -1;\n')if a.listed_length(eh.keys)~=0.0 then local ey;eg:addString('  switch (str.codePointAt(head)|0) {\n')ey=0.0;while true do local ez,eA,eB,eC,eD;ei=a.listed_length(eh.keys)if not(ey<ei)then break end;ez=a.listed_get(eh.keys,ey)eg:addString('  case ')ej=a.int32_tostring(ez)eg:addString(ej)eg:addString(':\n')eA,eB,eC=a.pcall(function()es=a.mapped_get(eh.map,ez)et=es end)if eA then else ek=a.bubble()et=ek end;eD=et;if eD.id>=0.0 then eg:addString('    ret = ')eg:addTarget(eD)eg:addString('(str, head + 1);\n')end;eg:addString('    break;\n')ey=ey+1.0 end;eg:addString('  default:\n')if eh.other.id>=0.0 then eg:addString('    ret = ')el=eh.other;eg:addTarget(el)eg:addString('(str, head + 1);\n')end;eg:addString('    break;\n')eg:addString('  }\n')elseif eh.other.id>=0.0 then eg:addString('  ret = ')em=eh.other;eg:addTarget(em)eg:addString('(str, head + 1);\n')end;eg:addString('  if (ret < 0) {\n')eg:addString('    return head;\n')eg:addString('  } else {\n')eg:addString('    return ret;\n')eg:addString('  }\n')elseif a.listed_length(eh.keys)~=0.0 then eg:addString('  switch (str.codePointAt(head)|0) {\n')ex=0.0;while true do local eE,eF,eG,eH,eI;en=a.listed_length(eh.keys)if not(ex<en)then break end;eE=a.listed_get(eh.keys,ex)eg:addString('  case ')eo=a.int32_tostring(eE)eg:addString(eo)eg:addString(':\n')eF,eG,eH=a.pcall(function()eu=a.mapped_get(eh.map,eE)ev=eu end)if eF then else ep=a.bubble()ev=ep end;eI=ev;if eI.id<0.0 then eg:addString('    return -1;\n')else eg:addString('    return ')eg:addTarget(eI)eg:addString('(str, head + 1);\n')end;eg:addString('    break;\n')ex=ex+1.0 end;eg:addString('  default:\n')if eh.other.id<0.0 then eg:addString('    return -1;\n')else eg:addString('    return ')eq=eh.other;eg:addTarget(eq)eg:addString('(str, head + 1);\n')end;eg:addString('    break;\n')eg:addString('  }\n')elseif eh.other.id<0.0 then eg:addString('  return -1;\n')else eg:addString('  return ')er=eh.other;eg:addTarget(er)eg:addString('(str, head + 1);\n')end;eg:addString('};\n')return nil end;e5.methods.addTable=function(eJ,eK)local eL,eM,eN;eN=0.0;while true do eL=a.listbuilder_length(eK.rows)if not(eN<eL)then break end;if a.listed_get(eK.rows,eN).name.id>=0.0 then eM=a.listed_get(eK.rows,eN)eJ:addRow(eM)end;eN=eN+1.0 end;eJ:addString('module.ret = q0;\n')return nil end;e5.constructor=function(eO,eP)eO.buf__27=eP;return nil end;e5.get.buf=function(eQ)return eQ.buf__27 end;j={}j.Javascript=e5;return j end;package.preload['temper-regex-engine/dfa/lua']=function()local a=require('temper-core')local eR,j;eR=a.type('Lua')eR.fromTable=function(eS)local eT,eU,eV;eT=eR(a.listbuilder_constructor())eT:addTable(eS)eU=eT.buf;eV=function(eW)return eW end;return a.listed_join(eU,'',eV)end;eR.methods.addString=function(eJ,eX)a.listbuilder_add(eJ.buf__30,eX)return nil end;eR.methods.addTarget=function(eO,eY)local eZ;if eY.id<0.0 then a.bubble()else eO:addString('q')eZ=a.int32_tostring(eY.id)eO:addString(eZ)end;return nil end;eR.methods.addRow=function(e_,f0)local f1,f2,f3,f4,f5,f6,f7,f8,f9,fa,fb,fc,fd,fe,ff;ff=f0.name;e_:addTarget(ff)e_:addString(' = function')e_:addString('(str, head)\n')if f0.ok then local ex;e_:addString('  if head > #str then return #str + 1 end\n')e_:addString('  local next = utf8_offset(str, 2, head)\n')e_:addString('  local code = utf8_codepoint(str, head)\n')e_:addString('  local ret = -1\n')ex=0.0;while true do local eE,fg,fh,fi,eI;f1=a.listed_length(f0.keys)if not(ex<f1)then break end;eE=a.listed_get(f0.keys,ex)if ex==0.0 then e_:addString('  if ')else e_:addString('  elseif ')end;e_:addString('code == ')f2=a.int32_tostring(eE)e_:addString(f2)e_:addString(' then\n')fg,fh,fi=a.pcall(function()fb=a.mapped_get(f0.map,eE)fc=fb end)if fg then else f3=a.bubble()fc=f3 end;eI=fc;if eI.id>=0.0 then e_:addString('    ret = ')e_:addTarget(eI)e_:addString('(str, next)\n')end;ex=ex+1.0 end;if a.listed_length(f0.keys)~=0.0 then e_:addString('  else\n')if f0.other.id>=0.0 then e_:addString('    ret = ')f4=f0.other;e_:addTarget(f4)e_:addString('(str, next)\n')end;e_:addString('  end\n')elseif f0.other.id>=0.0 then e_:addString('  ret = ')f5=f0.other;e_:addTarget(f5)e_:addString('(str, next)\n')end;e_:addString('  if ret < 0 then\n')e_:addString('    return head\n')e_:addString('  else\n')e_:addString('    return ret\n')e_:addString('  end\n')else local fj;e_:addString('  if head > #str then return -1 end\n')e_:addString('  local next = utf8_offset(str, 2, head)\n')e_:addString('  local code = utf8_codepoint(str, head)\n')fj=0.0;while true do local fk,fl,fm,fn,fo;f6=a.listed_length(f0.keys)if not(fj<f6)then break end;fk=a.listed_get(f0.keys,fj)if fj==0.0 then e_:addString('  if ')else e_:addString('  elseif ')end;e_:addString('code == ')f7=a.int32_tostring(fk)e_:addString(f7)e_:addString(' then\n')fl,fm,fn=a.pcall(function()fd=a.mapped_get(f0.map,fk)fe=fd end)if fl then else f8=a.bubble()fe=f8 end;fo=fe;if fo.id<0.0 then e_:addString('    return -1\n')else e_:addString('    return ')e_:addTarget(fo)e_:addString('(str, next)\n')end;fj=fj+1.0 end;if a.listed_length(f0.keys)~=0.0 then e_:addString('  else\n')if f0.other.id<0.0 then e_:addString('    return -1\n')else e_:addString('    return ')f9=f0.other;e_:addTarget(f9)e_:addString('(str, next)\n')end;e_:addString('  end\n')elseif f0.other.id<0.0 then e_:addString('  return -1\n')else e_:addString('  return ')fa=f0.other;e_:addTarget(fa)e_:addString('(str, next)\n')end end;e_:addString('end\n')return nil end;eR.methods.addTable=function(fp,fq)local fr,fs,ft,fu,fv,fw;fp:addString("local temper = package.loaded['temper-core/prelude']\n")fp:addString('local utf8_codepoint = utf8.codepoint\n')fp:addString('local utf8_offset = utf8.offset\n')fv=0.0;while true do fr=a.listbuilder_length(fq.rows)if not(fv<fr)then break end;if a.listed_get(fq.rows,fv).name.id>=0.0 then fp:addString('local ')fs=a.listed_get(fq.rows,fv).name;fp:addTarget(fs)fp:addString('\n')end;fv=fv+1.0 end;fw=0.0;while true do ft=a.listbuilder_length(fq.rows)if not(fw<ft)then break end;if a.listed_get(fq.rows,fw).name.id>=0.0 then fu=a.listed_get(fq.rows,fw)fp:addRow(fu)end;fw=fw+1.0 end;fp:addString('return q0\n')return nil end;eR.constructor=function(fx,fy)fx.buf__30=fy;return nil end;eR.get.buf=function(aI)return aI.buf__30 end;j={}j.Lua=eR;return j end;package.preload['temper-regex-engine/init']=function()require('temper-regex-engine/regex')require('temper-regex-engine/util')require('temper-regex-engine/ctype')require('temper-regex-engine/nfa/matcher')require('temper-regex-engine/nfa/state')require('temper-regex-engine/nfa/stack')require('temper-regex-engine/nfa/engine')require('temper-regex-engine/dfa/dfa')require('temper-regex-engine/dfa/lua')require('temper-regex-engine/dfa/javascript')require('temper-regex-engine/nfa/nfa')require('temper-regex-engine/native')require('temper-regex-engine/bench')require('temper-regex-engine/nfa/test')end;package.preload['temper-regex-engine/nfa/engine']=function()local a=require('temper-core')local fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,v,w,x,z,y,fK,fL,fM,fN,E,D,C,fO,fP,fQ,fR,fS,j;fz=a.import('std/regex','entire')fA=a.import('std/regex','oneOrMore')fB=a.import('std/regex','optional')fC=a.import('std/regex','Begin')fD=a.import('std/regex','Dot')fE=a.import('std/regex','End')fF=a.import('std/regex','WordBoundary')fG=a.import('std/regex','Digit')fH=a.import('std/regex','Space')fI=a.import('std/regex','Word')fJ=a.import('temper-regex-engine/nfa/stack','noGroups')v=a.import('temper-regex-engine/nfa/matcher','charCodeMatcher')w=a.import('temper-regex-engine/nfa/matcher','fromChars')x=a.import('temper-regex-engine/util','regexToString')z=a.import('temper-regex-engine/util','chr')y=a.import('temper-regex-engine/util','bogusMatch')fK=a.import('temper-regex-engine/nfa/state','State')fL=a.import('temper-regex-engine/nfa/stack','StackStart')fM=a.import('temper-regex-engine/nfa/state','Next')fN=a.import('temper-regex-engine/nfa/stack','StackSlot')E=a.import('temper-regex-engine/nfa/matcher','EndGroupMatcher')D=a.import('temper-regex-engine/nfa/matcher','StartGroupMatcher')C=a.import('temper-regex-engine/nfa/matcher','EpsilonMatcher')fO=a.import('std/regex','Group')fP=a.import('std/regex','Match')fQ=a.type('Engine')fQ.newStateIn=function(fT)local fU;fU=fK(a.listbuilder_length(fT))a.listbuilder_add(fT,fU)return fU end;fQ.methods.newState=function(fV)return fQ.newStateIn(fV.states__79)end;fQ.methods.replace=function(fW,fX,fY)local fZ,f_,g0,g1,g2,g3,g4,g5,g6,g7,g8,g9,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk;gd=a.mapbuilder_constructor()ge=a.mapbuilder_constructor()gf=fL()gg=fM(fW.endState__81,fW.epsilon__82)gh=1.0;gi=a.stringbuilder_constructor()gj=1.0;while true do local gl;if not a.string_hasindex(fX,gj)then break end;fZ=fN(gj,fW.startState__80,gf,fJ)gl=fZ;while a.generic_ne(gl,gf)do local gm,gn,go,gp,gq,gr;gm=gl.index;gn=gl.state;go=gl.groups;f_=gl.next;gl=f_;if gn.id==fW.endState__81.id then a.stringbuilder_appendbetween(gi,fX,gh,gj)g0=fS(fX,gj,gm,gd,go)a.stringbuilder_append(gi,fY(g0))g1=a.string_prev(fX,gm)gj=g1;gh=gm;break end;gp=gn.next;gq=a.listbuilder_length(gp)gr=0.0;while gr<gq do local gs,gt,gu;g2=a.listed_getor(gp,gr,gg)gs=g2.matcher;gt=g2.toState;gu=gs:matches(fX,gm)if a.is_string_index(gu)then local gv,gw,gx,gy;gc=a.require_string_index(gu)if a.instance_of(gs,D)then a.mapbuilder_set(ge,a.cast_to(gs,D).name,gm)g3=fN(gc,gt,gl,go)gl=g3 elseif a.instance_of(gs,E)then gb=a.cast_to(gs,E)g4=gb.name;gv,gw,gx=a.pcall(function()g9=a.mapped_get(ge,gb.name)ga=g9 end)if gv then else g5=a.bubble()ga=g5 end;a.mapbuilder_set(gd,g4,a.pair_constructor(ga,gm))gy=a.listbuilder_constructor()a.listbuilder_add(gy,gb.name)a.listbuilder_addall(gy,go)g6=fN(gc,gt,gl,gy)gl=g6 else g7=fN(gc,gt,gl,go)gl=g7 end end;gr=gr+1.0 end end;g8=a.string_next(fX,gj)gj=g8 end;gk=a.string_end(fX)a.stringbuilder_appendbetween(gi,fX,gh,gk)return a.stringbuilder_tostring(gi)end;fQ.methods.split=function(gz,gA)local gB,gC,gD,gE,gF,gG,gH,gI,gJ,gK,gL,gM;gH=fL()gI=fM(gz.endState__81,gz.epsilon__82)gJ=1.0;gK=a.listbuilder_constructor()gL=1.0;while true do local gN;if not a.string_hasindex(gA,gL)then break end;gB=fN(gL,gz.startState__80,gH,fJ)gN=gB;while a.generic_ne(gN,gH)do local gO,gP,gQ,gR,gS;gO=gN.index;gP=gN.state;gC=gN.next;gN=gC;if gP.id==gz.endState__81.id then local gT;gT=a.string_slice(gA,gJ,gL)gD=a.string_prev(gA,gO)gL=gD;gJ=gO;a.listbuilder_add(gK,gT)break end;gQ=gP.next;gR=a.listbuilder_length(gQ)gS=0.0;while gS<gR do local gU,gV,gW;gE=a.listed_getor(gQ,gS,gI)gU=gE.matcher;gV=gE.toState;gW=gU:matches(gA,gO)if a.is_string_index(gW)then gF=fN(a.require_string_index(gW),gV,gN,fJ)gN=gF end;gS=gS+1.0 end end;gG=a.string_next(gA,gL)gL=gG end;gM=a.string_end(gA)a.listbuilder_add(gK,a.string_slice(gA,gJ,gM))return gK end;fQ.methods.found=function(gX,gY,gZ)local g_,h0,h1,h2,h3,h4,h5,h6,h7::h8::h5=fL()h6=fM(gX.endState__81,gX.epsilon__82)h7=1.0;while true do local h9;if not a.string_hasindex(gY,h7)then break end;h0=fN(h7,gX.startState__80,h5,fJ)h9=h0;while a.generic_ne(h9,h5)do local ha,hb,hc,hd,he;ha=h9.index;hb=h9.state;h1=h9.next;h9=h1;if hb.id==gX.endState__81.id then g_=ha;goto hf end;hc=hb.next;hd=a.listbuilder_length(hc)he=0.0;while he<hd do local hg,hh,hi;h2=a.listed_getor(hc,he,h6)hg=h2.matcher;hh=h2.toState;hi=hg:matches(gY,ha)if a.is_string_index(hi)then h3=fN(a.require_string_index(hi),hh,h9,fJ)h9=h3 end;he=he+1.0 end end;h4=a.string_next(gY,h7)h7=h4 end;g_=-1.0::hf::return g_ end;fQ.methods.find=function(eb,hj,hk)local hl,hm,hn,ho,hp,hq,hr,hs,ht,hu,hv,hw,hx,hy,hz,hA,hB,hC,hD,hE::hF::if a.is_null(hk)then hz=1.0 else hz=hk end;hA=a.mapbuilder_constructor()hB=a.mapbuilder_constructor()hC=fL()hD=fM(eb.endState__81,eb.epsilon__82)hE=hz;while true do local hG;if not a.string_hasindex(hj,hE)then break end;hm=fN(hE,eb.startState__80,hC,fJ)hG=hm;while a.generic_ne(hG,hC)do local hH,hI,hJ,hK,hL,hM;hH=hG.index;hI=hG.state;hJ=hG.groups;hn=hG.next;hG=hn;if hI.id==eb.endState__81.id then hl=fS(hj,hE,hH,hA,hJ)goto hN end;hK=hI.next;hL=a.listbuilder_length(hK)hM=0.0;while hM<hL do local hO,hP,hQ;ho=a.listed_getor(hK,hM,hD)hO=ho.matcher;hP=ho.toState;hQ=hO:matches(hj,hH)if a.is_string_index(hQ)then local hR,hS,hT,hU;hy=a.require_string_index(hQ)if a.instance_of(hO,D)then a.mapbuilder_set(hB,a.cast_to(hO,D).name,hH)hp=fN(hH,hP,hG,hJ)hG=hp elseif a.instance_of(hO,E)then hx=a.cast_to(hO,E)hq=hx.name;hR,hS,hT=a.pcall(function()hv=a.mapped_get(hB,hx.name)hw=hv end)if hR then else hr=a.bubble()hw=hr end;a.mapbuilder_set(hA,hq,a.pair_constructor(hw,hH))hU=a.listbuilder_constructor()a.listbuilder_add(hU,hx.name)a.listbuilder_addall(hU,hJ)hs=fN(hH,hP,hG,hU)hG=hs else ht=fN(hy,hP,hG,hJ)hG=ht end end;hM=hM+1.0 end end;hu=a.string_next(hj,hE)hE=hu end;hl=y()::hN::return hl end;fQ.constructor=function(eJ)local hV,hW,hX,hY;hV=a.listbuilder_constructor()eJ.states__79=hV;hW=fQ.newStateIn(eJ.states__79)eJ.startState__80=hW;hX=fQ.newStateIn(eJ.states__79)eJ.endState__81=hX;hY=C()eJ.epsilon__82=hY;return nil end;fQ.get.states=function(hZ)return hZ.states__79 end;fQ.get.startState=function(h_)return h_.startState__80 end;fQ.get.endState=function(i0)return i0.endState__81 end;fQ.get.epsilon=function(i1)return i1.epsilon__82 end;fR=function(i2,i3,i4,i5,i6)return fO(i3,i4,i5,i6)end;fS=function(i7,i8,i9,ia,ib)local ic,id,ie,ig,ih,ii,ij,ik,il,im,io,ip,iq,ir;im=a.mapbuilder_constructor()io=a.mapped_keys(ia)ip=0.0;while true do local is,it,iu,iv,iw,ix,iy;ic=a.listed_length(io)if not(ip<ic)then break end;is=a.listed_get(io,ip)it,iu,iv=a.pcall(function()ik=a.mapped_get(ia,is)il=ik end)if it then else id=a.bubble()il=id end;iw=il;ie=iw.key;ig=iw.value;ix=a.string_slice(i7,ie,ig)iy=0.0;while true do ih=a.listed_length(ib)if not(iy<ih)then break end;if a.str_eq(is,a.listed_getor(ib,iy,''))then ii=iw.key;ij=iw.value;a.mapbuilder_set(im,is,fR(i7,is,ix,ii,ij))end;iy=iy+1.0 end;ip=ip+1.0 end;iq=a.string_slice(i7,i8,i9)ir=fR(i7,'full',iq,i8,i9)return fP(ir,a.mapped_tomap(im))end;j={}j.Engine=fQ;return j end;package.preload['temper-regex-engine/nfa/matcher']=function()local a=require('temper-core')local i,e,f,g,h,x,y,z,iz,G,H,F,A,B,D,E,C,iA,w,v,j;i=a.import('temper-regex-engine/ctype','isWordChar')e=a.import('temper-regex-engine/ctype','wordChars')f=a.import('temper-regex-engine/ctype','spaceChars')g=a.import('temper-regex-engine/ctype','wordCharsList')h=a.import('temper-regex-engine/ctype','spaceCharsList')x=a.import('temper-regex-engine/util','regexToString')y=a.import('temper-regex-engine/util','bogusMatch')z=a.import('temper-regex-engine/util','chr')iz=a.type('Matcher')iz.methods.matches=function(eg,iB,iC)a.virtual()end;iz.methods.toString=function(eJ)a.virtual()end;G=a.type('BeginMatcher',iz)G.methods.matches=function(eO,iD,iE)local iF;if a.stringindexoption_compareto(iE,1.0)==0.0 then iF=iE else iF=-1.0 end;return iF end;G.methods.toString=function(e_)return'^'end;G.constructor=function(iG)return nil end;H=a.type('EndMatcher',iz)H.methods.matches=function(fp,iH,iI)local iJ,iK;iK=a.string_end(iH)if a.stringindexoption_compareto(iI,iK)==0.0 then iJ=iI else iJ=-1.0 end;return iJ end;H.methods.toString=function(fx)return'$'end;H.constructor=function(X)return nil end;F=a.type('WordBoundaryMatcher',iz)F.methods.matches=function(iL,iM,iN)local iO,iP,iQ,iR,iS,iT,iU,iV,iW;if a.stringindexoption_compareto_gt(iN,1.0)then iP=a.string_prev(iM,iN)iQ=a.string_get(iM,iP)iR=i(iQ)iU=iR else iU=false end;iW=a.string_end(iM)if a.stringindexoption_compareto_lt(iN,iW)then iS=a.string_get(iM,iN)iT=i(iS)iV=iT else iV=false end;if a.generic_ne(iU,iV)then iO=iN else iO=-1.0 end;return iO end;F.methods.toString=function(iX)return'\\b'end;F.constructor=function(aT)return nil end;A=a.type('SingleMatcher',iz)A.methods.matches=function(iY,iZ,i_)local j0,j1,j2,j3,j4;j4=a.string_end(iZ)if a.stringindexoption_compareto_lt(i_,j4)then j2=iY.char__110;j1=a.string_get(iZ,i_)j3=j2==j1 else j3=false end;if j3 then j0=a.string_next(iZ,i_)else j0=-1.0 end;return j0 end;A.methods.toString=function(j5)return z(j5.char__110)end;A.constructor=function(by,j6)by.char__110=j6;return nil end;A.get.char=function(j7)return j7.char__110 end;B=a.type('ContainsMatcher',iz)B.methods.matches=function(j8,j9,ja)local jb,jc,jd,je,jf;jf=a.string_end(j9)if a.stringindexoption_compareto_lt(ja,jf)then jc=a.string_get(j9,ja)jd=a.densebitvector_get(j8.bitset__119,jc)je=a.generic_eq(jd,j8.want__121)else je=false end;if je then jb=a.string_next(j9,ja)else jb=-1.0 end;return jb end;B.methods.toString=function(jg)local jh,ji;ji=a.listed_join(jg.options__120,'',z)if not jg.want__121 then jh=a.concat('[^',ji,']')else jh=a.concat('[',ji,']')end;return jh end;B.constructor=function(jj,jk,jl,jm)jj.bitset__119=jk;jj.options__120=jl;jj.want__121=jm;return nil end;B.get.bitset=function(jn)return jn.bitset__119 end;B.get.options=function(jo)return jo.options__120 end;B.get.want=function(jp)return jp.want__121 end;D=a.type('StartGroupMatcher',iz)D.methods.matches=function(jq,jr,js)return js end;D.methods.toString=function(jt)return a.concat('<',jt.name__133,'>')end;D.constructor=function(ju,jv)ju.name__133=jv;return nil end;D.get.name=function(jw)return jw.name__133 end;E=a.type('EndGroupMatcher',iz)E.methods.matches=function(jx,jy,jz)return jz end;E.methods.toString=function(jA)return a.concat('</',jA.name__142,'>')end;E.constructor=function(jB,jC)jB.name__142=jC;return nil end;E.get.name=function(jD)return jD.name__142 end;C=a.type('EpsilonMatcher',iz)C.methods.matches=function(jE,jF,jG)return jG end;C.methods.toString=function(jH)return'\xce\xb5'end;C.constructor=function(jI)return nil end;iA=a.listof()w=function(jJ,jK)local jL,jM,jN,jO,jP,jQ::jR::if a.listed_length(jJ)==1.0 then jO=jK else jO=false end;if jO then jM=a.listed_get(jJ,0.0)jL=A(jM)goto jS end;jP=a.densebitvector_constructor(0.0)jQ=0.0;while true do jN=a.listed_length(jJ)if not(jQ<jN)then break end;a.densebitvector_set(jP,a.listed_get(jJ,jQ),true)jQ=jQ+1.0 end;jL=B(jP,jJ,jK)::jS::return jL end;v=function(jT)return w(a.listof(jT),true)end;j={}j.Matcher=iz;j.BeginMatcher=G;j.EndMatcher=H;j.WordBoundaryMatcher=F;j.SingleMatcher=A;j.ContainsMatcher=B;j.StartGroupMatcher=D;j.EndGroupMatcher=E;j.EpsilonMatcher=C;j.fromChars=w;j.charCodeMatcher=v;return j end;package.preload['temper-regex-engine/nfa/nfa']=function()local a=require('temper-core')local fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,v,w,x,y,z,i,e,f,g,h,iz,jU,fQ,M,eR,e5,jV,jW,jX,jY,jZ,j_,k0,H,F,G,k1,D,E,k2,k3,k4,k5,k6,k7,j;fz=a.import('std/regex','entire')fA=a.import('std/regex','oneOrMore')fB=a.import('std/regex','optional')fC=a.import('std/regex','Begin')fD=a.import('std/regex','Dot')fE=a.import('std/regex','End')fF=a.import('std/regex','WordBoundary')fG=a.import('std/regex','Digit')fH=a.import('std/regex','Space')fI=a.import('std/regex','Word')v=a.import('temper-regex-engine/nfa/matcher','charCodeMatcher')w=a.import('temper-regex-engine/nfa/matcher','fromChars')x=a.import('temper-regex-engine/util','regexToString')y=a.import('temper-regex-engine/util','bogusMatch')z=a.import('temper-regex-engine/util','chr')i=a.import('temper-regex-engine/ctype','isWordChar')e=a.import('temper-regex-engine/ctype','wordChars')f=a.import('temper-regex-engine/ctype','spaceChars')g=a.import('temper-regex-engine/ctype','wordCharsList')h=a.import('temper-regex-engine/ctype','spaceCharsList')iz=a.import('temper-regex-engine/nfa/matcher','Matcher')jU=a.import('temper-regex-engine/regex','TemperRegex')fQ=a.import('temper-regex-engine/nfa/engine','Engine')M=a.import('temper-regex-engine/dfa/dfa','DFA')eR=a.import('temper-regex-engine/dfa/lua','Lua')e5=a.import('temper-regex-engine/dfa/javascript','Javascript')jV=a.import('std/regex','CodePoints')jW=a.import('std/regex','CodeSet')jX=a.import('std/regex','CodeRange')jY=a.import('std/regex','Or')jZ=a.import('std/regex','Repeat')j_=a.import('std/regex','Sequence')k0=a.import('std/regex','Special')H=a.import('temper-regex-engine/nfa/matcher','EndMatcher')F=a.import('temper-regex-engine/nfa/matcher','WordBoundaryMatcher')G=a.import('temper-regex-engine/nfa/matcher','BeginMatcher')k1=a.import('std/regex','Capture')D=a.import('temper-regex-engine/nfa/matcher','StartGroupMatcher')E=a.import('temper-regex-engine/nfa/matcher','EndGroupMatcher')k2=a.type('DFAMatcher__24',iz)k2.methods.matches=function(jt,k8,k9)return jt.table__134:foundAt(k8,k9)end;k2.methods.toString=function(jx)local ka,kb,kc,kd,ke,kf;kd,ke,kf=a.pcall(function()kb=x(jx.source__135)kc=kb end)if kd then else ka=a.bubble()kc=ka end;return a.concat('/',kc,'/')end;k2.constructor=function(a9,kg,kh)a9.table__134=kg;a9.source__135=kh;return nil end;k2.get.table=function(ki)return ki.table__134 end;k2.get.source=function(kj)return kj.source__135 end;k3=a.type('EvalMatcher__27',iz)k3.methods.matches=function(jE,hj,kk)return jE.matcher__145(hj,kk)end;k3.methods.toString=function(jH)local kl,km,kn,ko,kp,kq;ko,kp,kq=a.pcall(function()km=x(jH.source__146)kn=km end)if ko then else kl=a.bubble()kn=kl end;return a.concat('/',kn,'/')end;k3.constructor=function(b0,kr,ks)b0.matcher__145=kr;b0.source__146=ks;return nil end;k3.get.matcher=function(kt)return kt.matcher__145 end;k3.get.source=function(ku)return ku.source__146 end;k4=a.type('TemperRegexNFA',jU)k4.fromRegex=function(kv,kw)local kx,ky,kz,kA,kB;if a.is_null(kw)then kx=k5 else kx=kw end;ky=k4(fQ(),k6,kx)kz=ky.engine.startState;kA=ky.engine.endState;ky:buildRegex(kv,kz,kA)kB=function(kC)return ky.engine:found(kC,1.0)end;ky['runFound']=kB;return ky end;k4.fromRegexDFA=function(kD)local jh,kE,kF,kG,kH,kI,kJ,kK;kI=M.fromEngine(k4.fromRegex(kD).engine)kJ=function(kL)local S,kM,kN,kO,kP,kQ,kR;kQ=k4.fromRegex(kL)kR=M.fromEngine(kQ.engine)if not a.is_null(kR)then kM=a.instance_of(kR,M)else kM=false end;if kM then if a.is_null(kR)then kN=a.bubble()kP=kN else kP=kR end;kO=kP.table;S=k2(kO,kL)else S=a.null end;return S end;kK=k4.fromRegex(kD,kJ)if not a.is_null(kI)then kE=a.instance_of(kI,M)else kE=false end;if kE then local kS,kT;if a.is_null(kI)then kF=a.bubble()kH=kF else kH=kI end;kS=kH.table;kT=function(kU)return kS:foundAfter(kU,1.0)end;kG=kT;kK['runFound']=kG;jh=kK else jh=kK end;return jh end;k4.fromRegexLua=function(kV,kW)local kX,kY,kZ,k_,l0,l1,l2,l3;l1=M.fromEngine(k4.fromRegex(kV).engine)l2=function(l4)local l5,l6,l7,l8,l9,la,lb;la=k4.fromRegex(l4)lb=M.fromEngine(la.engine)if not a.is_null(lb)then l6=a.instance_of(lb,M)else l6=false end;if l6 then local lc;if a.is_null(lb)then l7=a.bubble()l9=l7 else l9=lb end;lc=eR.fromTable(l9.table)l8=kW(lc)l5=k3(l8,l4)else l5=a.null end;return l5 end;l3=k4.fromRegex(kV,l2)if not a.is_null(l1)then kY=a.instance_of(l1,M)else kY=false end;if kY then local ld;if a.is_null(l1)then kZ=a.bubble()l0=kZ else l0=l1 end;ld=eR.fromTable(l0.table)k_=kW(ld)l3['runFound']=k7(k_)kX=l3 else kX=l3 end;return kX end;k4.fromRegexJavascript=function(le,lf)local lg,lh,li,lj,lk,ll,lm,ln;ll=M.fromEngine(k4.fromRegex(le).engine)lm=function(lo)local lp,lq,lr,ls,lt,lu,lv;lu=k4.fromRegex(lo)lv=M.fromEngine(lu.engine)if not a.is_null(lv)then lq=a.instance_of(lv,M)else lq=false end;if lq then local lw;if a.is_null(lv)then lr=a.bubble()lt=lr else lt=lv end;lw=e5.fromTable(lt.table)ls=lf(lw)lp=k3(ls,lo)else lp=a.null end;return lp end;ln=k4.fromRegex(le,lm)if not a.is_null(ll)then lh=a.instance_of(ll,M)else lh=false end;if lh then local lx;if a.is_null(ll)then li=a.bubble()lk=li else lk=ll end;lx=e5.fromTable(lk.table)lj=lf(lx)ln['runFound']=k7(lj)lg=ln else lg=ln end;return lg end;k4.methods.buildRegex=function(ly,lz,lA,lB)local lC,lD,lE,lF,lG,lH,lI,lJ,lK,lL,lM,lN,lO,lP,lQ,lR,lS,lT,lU,lV,lW,lX,lY,lZ,l_,m0,m1,m2,m3,m4,m5,m6,m7,m8,m9,ma,mb,mc,md,me,mf,mg,mh,mi,mj,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mD,mE,mF,mG,mH,mI,mJ,mK::mL::mB=ly.subRegex__158(lz)if not a.is_null(mB)then lD=a.instance_of(mB,iz)else lD=false end;if lD then if a.is_null(mB)then lE=a.bubble()mm=lE else mm=mB end;lA:addNext(mm,lB)lC=nil;goto mM end;if a.instance_of(lz,k1)then local mN,mO;mu=a.cast_to(lz,k1)mN=ly.engine__156:newState()mO=ly.engine__156:newState()lF=D(mu.name)lA:addNext(lF,mN)lG=mu.item;ly:buildRegex(lG,mN,mO)mO:addNext(E(mu.name),lB)elseif a.instance_of(lz,jV)then mv=a.cast_to(lz,jV)mC=lA;mD=1.0;while true do local mP,mQ;if not a.string_hasindex(mv.value,mD)then break end;mP=a.string_get(mv.value,mD)lH=a.string_next(mv.value,mD)mD=lH;if a.string_hasindex(mv.value,mD)then lI=ly.engine__156:newState()mn=lI else mn=lB end;mQ=mn;lJ=v(mP)mC:addNext(lJ,mQ)mC=mQ end elseif a.instance_of(lz,jW)then mw=a.cast_to(lz,jW)mE=a.listbuilder_constructor()mF=0.0;while true do local mR,mS,mT;lK=a.list_length(mw.items)if not(mF<lK)then break end;mR=a.list_get(mw.items,mF)if a.instance_of(mR,jX)then local mU;mo=a.cast_to(mR,jX)lL=mo.min;mU=lL;while true do lM=mo.max;if not(mU<=lM)then break end;a.listbuilder_add(mE,mU)mU=mU+1.0 end elseif a.instance_of(mR,jV)then mp=a.cast_to(mR,jV)mS=a.string_split(mp.value,'')mT=0.0;while true do lN=a.list_length(mS)if not(mT<lN)then break end;a.listbuilder_add(mE,a.string_get(a.list_get(mS,mT),1.0))mT=mT+1.0 end end;mF=mF+1.0 end;lO=mw.negated;lP=w(mE,not lO)lA:addNext(lP,lB)elseif a.instance_of(lz,jY)then mx=a.cast_to(lz,jY)mG=0.0;while true do lQ=a.list_length(mx.items)if not(mG<lQ)then break end;lR=a.list_get(mx.items,mG)ly:buildRegex(lR,lA,lB)mG=mG+1.0 end elseif a.instance_of(lz,jZ)then my=a.cast_to(lz,jZ)mH=lA;mI=0.0;while true do local mV;lS=my.min;if not(mI<lS)then break end;mV=ly.engine__156:newState()lT=my.item;ly:buildRegex(lT,mH,mV)mH=mV;mI=mI+1.0 end;if not a.is_null(my.max)then local mW,mX,mY,mZ,m_;mX,mY,mZ=a.pcall(function()lU=my.max;if a.is_null(lU)then a.bubble()else mq=lU end;mW=mq end)if mX then else lV=a.bubble()mW=lV end;lW=my.min;m_=lW;while m_<mW do local n0;n0=ly.engine__156:newState()if not my.reluctant then lX=ly.engine__156.epsilon;mH:addNext(lX,lB)lY=my.item;ly:buildRegex(lY,mH,n0)else lZ=my.item;ly:buildRegex(lZ,mH,n0)l_=ly.engine__156.epsilon;mH:addNext(l_,lB)end;mH=n0;m_=m_+1.0 end;m0=ly.engine__156.epsilon;mH:addNext(m0,lB)elseif not my.reluctant then m1=ly.engine__156.epsilon;mH:addNext(m1,lB)m2=my.item;ly:buildRegex(m2,mH,mH)else m3=my.item;ly:buildRegex(m3,mH,mH)m4=ly.engine__156.epsilon;mH:addNext(m4,lB)end elseif a.instance_of(lz,j_)then mz=a.cast_to(lz,j_)m5=a.list_length(mz.items)if m5==0.0 then m6=ly.engine__156.epsilon;lA:addNext(m6,lB)elseif m5==1.0 then m7=a.list_get(mz.items,0.0)ly:buildRegex(m7,lA,lB)else local n1,n2,n3;n1=a.listbuilder_constructor()m8=a.listbuilder_constructor()n2=m8;n3=function(n4)local n5,n6,n7,n8,n9,na,nb;nb=0.0;while true do local nc;n5=a.listed_length(n4)if not(nb<n5)then break end;nc=a.listed_get(n4,nb)if a.generic_eq(nc,fC)then na=true else if a.generic_eq(nc,fE)then n9=true else if a.generic_eq(nc,fF)then n8=true else n8=a.generic_eq(nc,fD)end;n9=n8 end;na=n9 end;if na then if a.listbuilder_length(n2)~=0.0 then a.listbuilder_add(n1,n2)end;n6=a.listbuilder_constructor()n2=n6;a.listbuilder_add(n2,nc)elseif a.instance_of(nc,j_)then n7=a.cast_to(nc,j_).items;n3(n7)else a.listbuilder_add(n2,nc)end;nb=nb+1.0 end;return nil end;n3(mz.items)if a.listbuilder_length(n2)~=0.0 then a.listbuilder_add(n1,n2)end;if a.listbuilder_length(n1)==0.0 then m9=ly.engine__156.epsilon;lA:addNext(m9,lB)else local nd,ne;nd=lA;ne=0.0;while true do local nf,ng;ma=a.listbuilder_length(n1)if not(ne<ma)then break end;nf=a.listed_get(n1,ne)ng=0.0;while true do local nh;mb=a.listed_length(nf)if not(ng<mb)then break end;if ng+1.0~=a.listed_length(nf)then ms=true else mr=ne+1.0;mc=a.listbuilder_length(n1)ms=mr~=mc end;if ms then md=ly.engine__156:newState()mt=md else mt=lB end;nh=mt;me=a.listed_get(nf,ng)ly:buildRegex(me,nd,nh)nd=nh;ng=ng+1.0 end;ne=ne+1.0 end end end elseif a.instance_of(lz,k0)then mA=a.cast_to(lz,k0)if a.generic_eq(mA,fC)then mf=G()lA:addNext(mf,lB)elseif a.generic_eq(mA,fD)then mg=w(a.listof(0.0),false)lA:addNext(mg,lB)elseif a.generic_eq(mA,fE)then mh=H()lA:addNext(mh,lB)elseif a.generic_eq(mA,fF)then mi=F()lA:addNext(mi,lB)elseif a.generic_eq(mA,fG)then mJ=a.listbuilder_constructor()mK=48.0;while mK<=57.0 do a.listbuilder_add(mJ,mK)mK=mK+1.0 end;mj=w(mJ,true)lA:addNext(mj,lB)elseif a.generic_eq(mA,fH)then mk=w(h,true)lA:addNext(mk,lB)elseif a.generic_eq(mA,fI)then ml=w(g,true)lA:addNext(ml,lB)else a.bubble()end end;lC=nil::mM::return lC end;k4.methods.replace=function(ni,nj,nk)return ni.engine__156:replace(nj,nk)end;k4.methods.split=function(nl,nm)return nl.engine__156:split(nm)end;k4.methods.found=function(iG,nn)return a.stringindexoption_compareto_ne(iG.runFound__157(nn),-1.0)end;k4.methods.find=function(no,np,nq)local nr;if a.is_null(nq)then nr=1.0 else nr=nq end;return no.engine__156:find(np,nr)end;k4.constructor=function(bG,ns,nt,nu)bG.engine__156=ns;bG.runFound__157=nt;bG.subRegex__158=nu;return nil end;k4.get.engine=function(nv)return nv.engine__156 end;k4.set.engine=function(nw,nx)nw.engine__156=nx;return nil end;k4.get.runFound=function(ny)return ny.runFound__157 end;k4.set.runFound=function(nz,nA)nz.runFound__157=nA;return nil end;k4.get.subRegex=function(nB)return nB.subRegex__158 end;k4.set.subRegex=function(ao,nC)ao.subRegex__158=nC;return nil end;k5=function(nD)return a.null end;k6=function(nE)return-1.0 end;k7=function(nF)local nG;nG=function(nH)local nI,nJ,nK,nL::nM::nK=1.0;nL=a.string_end(nH)while a.stringindexoption_compareto_ne(nK,nL)do local nN;nN=nF(nH,nK)if a.stringindexoption_compareto_ne(nN,-1.0)then nI=nN;goto nO end;nJ=a.string_next(nH,nK)nK=nJ end;nI=-1.0::nO::return nI end;return nG end;j={}j.TemperRegexNFA=k4;return j end;package.preload['temper-regex-engine/nfa/stack']=function()local a=require('temper-core')local fK,nP,fL,fN,fJ,j;fK=a.import('temper-regex-engine/nfa/state','State')nP=a.type('Stack')nP.get.index=function(nQ)end;nP.get.state=function(nR)end;nP.get.groups=function(nS)end;nP.get.next=function(nT)a.virtual()end;fL=a.type('StackStart',nP)fL.get.next=function(nU)return nU end;fL.constructor=function(fV,nV,nW,nX)local nY,nZ,n_,o0;if a.is_null(nV)then nZ=1.0 else nZ=nV end;if a.is_null(nW)then nY=fK(0.0)n_=nY else n_=nW end;if a.is_null(nX)then o0=a.listof()else o0=nX end;fV.index__22=nZ;fV.state__23=n_;fV.groups__24=o0;return nil end;fL.get.index=function(jj)return jj.index__22 end;fL.get.state=function(ah)return ah.state__23 end;fL.get.groups=function(o1)return o1.groups__24 end;fN=a.type('StackSlot',nP)fN.get.next=function(o2)return o2.slot__33 end;fN.constructor=function(ed,o3,o4,o5,o6)ed.index__31=o3;ed.state__32=o4;ed.slot__33=o5;ed.groups__34=o6;return nil end;fN.get.index=function(jB)return jB.index__31 end;fN.get.state=function(o7)return o7.state__32 end;fN.get.slot=function(o8)return o8.slot__33 end;fN.get.groups=function(c2)return c2.groups__34 end;fJ=a.listof()j={}j.Stack=nP;j.StackStart=fL;j.StackSlot=fN;j.noGroups=fJ;return j end;package.preload['temper-regex-engine/nfa/state']=function()local a=require('temper-core')local v,w,fM,fK,j;v=a.import('temper-regex-engine/nfa/matcher','charCodeMatcher')w=a.import('temper-regex-engine/nfa/matcher','fromChars')fM=a.type('Next')fM.constructor=function(o9,oa,ob)o9.toState__23=oa;o9.matcher__24=ob;return nil end;fM.get.toState=function(oc)return oc.toState__23 end;fM.get.matcher=function(jI)return jI.matcher__24 end;fK=a.type('State')fK.get.next=function(nU)return nU.nextVar__31 end;fK.methods.addNext=function(o2,od,oe)a.listbuilder_add(o2.next,fM(oe,od))return nil end;fK.methods.addNextFirst=function(of,og,oh)local oi,oj,ok,ol;oj=of.next;ok=a.listbuilder_constructor()of.nextVar__31=ok;a.listbuilder_add(of.next,fM(oh,og))ol=0.0;while true do oi=a.listbuilder_length(oj)if not(ol<oi)then break end;a.listbuilder_add(of.next,a.listed_get(oj,ol))ol=ol+1.0 end;return nil end;fK.constructor=function(fW,om)local on;fW.id__28=om;on=a.listbuilder_constructor()fW.nextVar__31=on;return nil end;fK.get.id=function(jj)return jj.id__28 end;fK.get.nextVar=function(ah)return ah.nextVar__31 end;fK.set.nextVar=function(eQ,oo)eQ.nextVar__31=oo;return nil end;j={}j.Next=fM;j.State=fK;return j end;package.preload['temper-regex-engine/regex']=function()local a=require('temper-core')local fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,jU,j;fz=a.import('std/regex','entire')fA=a.import('std/regex','oneOrMore')fB=a.import('std/regex','optional')fC=a.import('std/regex','Begin')fD=a.import('std/regex','Dot')fE=a.import('std/regex','End')fF=a.import('std/regex','WordBoundary')fG=a.import('std/regex','Digit')fH=a.import('std/regex','Space')fI=a.import('std/regex','Word')jU=a.type('TemperRegex')jU.methods.replace=function(nT,op,oq)a.virtual()end;jU.methods.split=function(nU,os)a.virtual()end;jU.methods.found=function(o2,ot)a.virtual()end;jU.methods.find=function(of,ou,ov)local ow,ox;if a.is_null(ov)then ox=1.0 else ox=ov end;a.virtual()return ow end;j={}j.TemperRegex=jU;return j end;package.preload['temper-regex-engine/util']=function()local a=require('temper-core')local fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,jV,jW,jX,jY,jZ,j_,k0,k1,fP,fO,x,y,z,j;fz=a.import('std/regex','entire')fA=a.import('std/regex','oneOrMore')fB=a.import('std/regex','optional')fC=a.import('std/regex','Begin')fD=a.import('std/regex','Dot')fE=a.import('std/regex','End')fF=a.import('std/regex','WordBoundary')fG=a.import('std/regex','Digit')fH=a.import('std/regex','Space')fI=a.import('std/regex','Word')jV=a.import('std/regex','CodePoints')jW=a.import('std/regex','CodeSet')jX=a.import('std/regex','CodeRange')jY=a.import('std/regex','Or')jZ=a.import('std/regex','Repeat')j_=a.import('std/regex','Sequence')k0=a.import('std/regex','Special')k1=a.import('std/regex','Capture')fP=a.import('std/regex','Match')fO=a.import('std/regex','Group')x=function(oy)local oz,oA,oB,oC,oD,oE,oF,oG,oH,oI,oJ,oK,oL,oM,oN,oO,oP,oQ,oR,oS,oT,oU,oV,oW,oX,oY,oZ,o_,p0,p1,p2,p3,p4,p5,p6,p7,p8,p9,pa,pb,pc,pd,pe,pf,pg,ph,pi,pj,pk;if a.instance_of(oy,k1)then p0=a.cast_to(oy,k1)oA=p0.name;oR=x(p0.item)oz=a.concat('(?',oA,'=',oR,')')elseif a.instance_of(oy,jV)then p1=a.cast_to(oy,jV)oz=p1.value elseif a.instance_of(oy,jW)then p2=a.cast_to(oy,jW)p7=a.listbuilder_constructor()p8=0.0;while true do local pl;oB=a.list_length(p2.items)if not(p8<oB)then break end;pl=a.list_get(p2.items,p8)if a.instance_of(pl,jX)then oU=a.cast_to(pl,jX)oS=a.string_fromcodepoint(oU.min)oT=a.string_fromcodepoint(oU.max)a.listbuilder_add(p7,a.concat(oS,'-',oT))elseif a.instance_of(pl,jV)then a.listbuilder_add(p7,a.cast_to(pl,jV).value)end;p8=p8+1.0 end;if p2.negated then p9='^'else p9=''end;pa=function(pm)return pm end;oC=a.listed_join(p7,'',pa)oz=a.concat('[',p9,oC,']')elseif a.instance_of(oy,jY)then p3=a.cast_to(oy,jY)pb=a.mapbuilder_constructor()pc=function(pn)local po,pp,pq,pr;if a.instance_of(pn,jY)then local ps;pr=a.cast_to(pn,jY)ps=0.0;while true do po=a.list_length(pr.items)if not(ps<po)then break end;pp=a.list_get(pr.items,ps)pc(pp)ps=ps+1.0 end else pq=x(pn)a.mapbuilder_set(pb,pq,true)end;return nil end;pd=0.0;while true do oD=a.list_length(p3.items)if not(pd<oD)then break end;pc(a.list_get(p3.items,pd))pd=pd+1.0 end;oE=a.mapped_tolist(pb)pe=function(pt)return pt.key end;pf=a.listed_join(oE,'|',pe)oz=a.concat('(',pf,')')elseif a.instance_of(oy,jZ)then p4=a.cast_to(oy,jZ)if p4.min==0.0 then oF=p4.max;oV=oF==1.0 else oV=false end;if oV then pg='?'else if p4.min==0.0 then oG=p4.max;oW=a.is_null(oG)else oW=false end;if oW then pg='*'else if p4.min==1.0 then oH=p4.max;oX=a.is_null(oH)else oX=false end;if oX then pg='+'elseif p4.min==p4.max then oI=a.int32_tostring(p4.min)pg=a.concat('{',oI,'}')elseif a.is_null(p4.max)then oJ=a.int32_tostring(p4.min)pg=a.concat('{',oJ,',}')else oK=a.int32_tostring(p4.min)oL=p4.max;if a.is_null(oL)then a.bubble()else oY=oL end;oM=a.int32_tostring(oY)pg=a.concat('{',oK,',',oM,'}')end end end;if p4.reluctant then ph='?'else ph=''end;pi=x(p4.item)pj='%'oN=p4.item;if a.instance_of(oN,jW)then pj=pi elseif a.instance_of(oN,jV)then pk=a.cast_to(p4.item,jV)if a.string_hasindex(pk.value,1.0)then oO=a.string_hasindex(pk.value,a.string_next(pk.value,1.0))oZ=not oO else oZ=false end;if oZ then pj=pi else pj=a.concat(pi)end else pj=a.concat('(',pi,')')end;oz=a.concat(pj,pg,ph)elseif a.instance_of(oy,j_)then p5=a.cast_to(oy,j_)if a.list_length(p5.items)==0.0 then oz=''elseif a.list_length(p5.items)==1.0 then oP=a.list_get(p5.items,0.0)oz=x(oP)else local pu,pv,pw,px;pu=a.listbuilder_constructor()pv=0.0;while true do oQ=a.list_length(p5.items)if not(pv<oQ)then break end;o_=x(a.list_get(p5.items,pv))a.listbuilder_add(pu,o_)pv=pv+1.0 end;pw=function(py)return py end;px=a.listed_join(pu,'',pw)oz=a.concat('(',px,')')end elseif a.instance_of(oy,k0)then p6=a.cast_to(oy,k0)if a.generic_eq(p6,fC)then oz='^'elseif a.generic_eq(p6,fD)then oz='.'elseif a.generic_eq(p6,fE)then oz='$'elseif a.generic_eq(p6,fF)then oz='\\b'elseif a.generic_eq(p6,fG)then oz='\\d'elseif a.generic_eq(p6,fH)then oz='\\s'elseif a.generic_eq(p6,fI)then oz='\\w'else a.bubble()end else a.bubble()end;return oz end;y=function()local pz;pz=1.0;return fP(fO('','',pz,pz),a.map_constructor(a.listof()))end;z=function(pA)local pB,pC,pD,pE,pF;pD,pE,pF=a.pcall(function()pC=a.string_fromcodepoint(pA)pB=pC end)if pD then else pB=a.bubble()end;return pB end;j={}j.regexToString=x;j.bogusMatch=y;j.chr=z;return j end
